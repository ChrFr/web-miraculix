{% extends 'orcaserver/base.html' %}

{% block title %}
    Injectable "{{ view.name }}"
{% endblock %}

{% block content %}
    {% if error_message %}<p style="color: red;"><strong>{{ error_message }}</strong></p>{% endif %}
    <p>{{ injectable.docstring }}</p>
    <form action='' method="post">
        {% csrf_token %}
        {% if injectable.can_be_changed  %}
            {% bootstrap_form form %}
            <input type="submit" name="change" value="Change" class="btn btn-primary">
            <input type="submit" name="reset" value="Reset" class="btn btn-secondary">
            <input type="submit" name="clear" value="Clear" class="btn btn-tertiary">
        {% else %}
        <table class="table" id="parent_injectables">
        <thead>
          <th >Uses the following injectables as parameters</th>
        </thead>
            {% for parent_name, parent in injectable.parent_injectable_urls.items %}
                <tr><td><a href={{ parent }}>{{ parent_name }}</a></td></tr>
            {% endfor %}
        <thead>
          <th >Calculated value</th>
        </thead>
            <tr><td>{{ injectable.repr_html | safe }}</td></tr>
        </table>
        {% endif %}
    </form>
{% endblock %}
